# VoiceFleet Programmatic SEO - Cloudflare Workers
name = "voicefleet-seo"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Minification
minify = true

# Routes - serve SEO pages from voicefleet.ai
# Individual routes for each industry combo page (CF doesn't support mid-path wildcards)
routes = [
  { pattern = "voicefleet.ai/industries/*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/industries", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/locations/*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/locations", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/sitemap.xml", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/sitemaps/*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/robots.txt", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/health", zone_name = "voicefleet.ai" },
  # Only catch SEO-specific admin routes, let /admin/campaigns go to Next.js
  { pattern = "voicefleet.ai/admin/generate", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/admin/generate-all", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/admin/cache-status", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/admin/run-status", zone_name = "voicefleet.ai" },
  # Industry + location combo pages
  { pattern = "voicefleet.ai/restaurant-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/restaurants-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/dental-clinic-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/dental-clinics-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/medical-clinic-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/medical-clinics-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/plumber-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/plumbers-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/electrician-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/electricians-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/hvac-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/law-firm-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/law-firms-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/accounting-firm-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/accounting-firms-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/car-dealership-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/car-dealerships-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/auto-repair-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/hair-salon-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/hair-salons-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/spa-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/spas-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/real-estate-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/property-management-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/hotel-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/hotels-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/fitness-center-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/fitness-centers-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/insurance-agency-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/insurance-agencies-voice-agent-in-*", zone_name = "voicefleet.ai" },
  # AI Receptionist pages (EN) — /ai-receptionist-{industry}-{city}
  { pattern = "voicefleet.ai/ai-receptionist-dental-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-restaurant-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-restaurants-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-medical-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-salon-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-salons-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-hotel-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-hotels-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-plumber-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-plumbers-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-gym-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-lawyer-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/ai-receptionist-insurance-*", zone_name = "voicefleet.ai" },
  # AI Receptionist pages (ES) — /es/asistente-ia-{industry}-{city}
  { pattern = "voicefleet.ai/es/asistente-ia-odontologos-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-restaurantes-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-clinicas-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-peluquerias-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-gimnasios-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-hoteles-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-plomeros-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-abogados-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/es/asistente-ia-seguros-*", zone_name = "voicefleet.ai" },
  # Common alias routes — redirect common search terms to canonical pages
  { pattern = "voicefleet.ai/dentist-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/dentists-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/salon-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/salons-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/doctor-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/doctors-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/clinic-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/clinics-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/gym-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/gyms-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/lawyer-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/lawyers-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/mechanic-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/mechanics-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/realtor-voice-agent-in-*", zone_name = "voicefleet.ai" },
  { pattern = "voicefleet.ai/realtors-voice-agent-in-*", zone_name = "voicefleet.ai" }
]

# Environment variables
[vars]
SITE_URL = "https://voicefleet.ai"
APP_URL = "https://app.voicefleet.ai"
API_URL = "https://api.voicefleet.ai"
ENVIRONMENT = "production"
# Secrets are set via wrangler secret put (not in this file):
# - wrangler secret put ADMIN_SECRET
# - wrangler secret put SEO_WORKER_SECRET

# KV Namespaces - Replace IDs after creating with:
# wrangler kv:namespace create SEO_CACHE
# wrangler kv:namespace create CONTENT_CACHE
[[kv_namespaces]]
binding = "SEO_CACHE"
id = "e0c9d48eb905441da9c165a032b1e293"

[[kv_namespaces]]
binding = "CONTENT_CACHE"
id = "9053889099cf4cb687d07dc87f11e8a6"

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Local testing overrides (uncomment for local dev)
# [vars]
# API_URL = "http://localhost:3000"

# Cron trigger disabled - Cloudflare free plan limit reached
# Use an external scheduler (cron-job.org, GitHub Actions, etc.) to call:
# POST https://voicefleet.ai/admin/generate-all
# Body: {"secret":"<ADMIN_SECRET>"}
# Schedule: Daily at 2am UTC
